<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>first_post | Simirror的blog</title>
  
  <meta name="keywords" content="白帽子，web安全">
  
  
  <meta name="description" content="应该是信息安全博客吧">
  

  

  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  

  <!-- link -->
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.6.3/css/all.min.css">
  

  

  
  <link rel="stylesheet" href="/style.css">
  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
    <div id="loading-bar-wrapper">
  <div id="loading-bar" class="pure"></div>
</div>

    <script>setLoadingBarProgress(20)</script>
    <header class="l_header pure">
	<div class="wrapper">
		<div class="nav-main container container--flex">
      <a class="logo flat-box" href="/">
        
          Simirror的blog
        
      </a>
			<div class="menu">
				<ul class="h-list">
          
				</ul>
			</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search">
						<span class="icon"><i class="fas fa-search fa-fw"></i></span>
					</form>
				</div>
			
			<ul class="switcher h-list">
				
					<li class="s-search"><a class="fas fa-search fa-fw" href="javascript:void(0)"></a></li>
				
				<li class="s-menu"><a class="fas fa-bars fa-fw" href="javascript:void(0)"></a></li>
			</ul>
		</div>

		<div class="nav-sub container container--flex">
			<a class="logo flat-box"></a>
			<ul class="switcher h-list">
				<li class="s-comment"><a class="flat-btn fas fa-comments fa-fw" href="javascript:void(0)"></a></li>
				<li class="s-toc"><a class="flat-btn fas fa-list fa-fw" href="javascript:void(0)"></a></li>
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
    <header>
		<nav class="menu">
      <ul>
          
      </ul>
		</nav>
    </header>
	</aside>

    <script>setLoadingBarProgress(40);</script>
    <div class="l_body">
    <div class='container clearfix'>
        <div class='l_main'>
            <article id="post" class="post white-box article-type-post" itemscope itemprop="blogPost">
  
<section class="meta">
  
  
  <div class="meta" id="header-meta">
    
      
          <h1 class="title">first_post</h1>
      
    

    <div class="new-meta-box">
      
        <div class="new-meta-item author">
          <a href="http://simirror.win">
            <i class="fas fa-user" aria-hidden="true"></i>
            Simirror
          </a>
        </div>
      
      
        <div class="new-meta-item date">
          <a class="notlink">
            <i class="fas fa-clock" aria-hidden="true"></i>
            2019-04-20
          </a>
        </div>
      
      
        
      
      
        
          <div class="new-meta-item browse busuanzi">
            <a class="notlink">
              <i class="fas fa-eye" aria-hidden="true"></i>
              <span id="busuanzi_value_page_pv">
                <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>
              </span>
            </a>
          </div>
        
      
      
    </div>
    <hr>
  </div>
</section>

    <section class="article typo">
      <div class="article-entry" itemprop="articleBody">
        <h1 id="专业渗透测试实验室搭建-1-启航"><a href="#专业渗透测试实验室搭建-1-启航" class="headerlink" title="专业渗透测试实验室搭建(1)-启航"></a>专业渗透测试实验室搭建(1)-启航</h1><p>渗透测试最关键的就是练习,因为这是一个需要练习的职业,你要不停的练习,练习,练习才能有更深刻的体验和认知.</p>
<p>因此,实验环境的搭建就格外重要了,我们需要一个专业的渗透测试靶机集群,作为我们的练习目标</p>
<p>他应该满足我们的三个特征:</p>
<blockquote>
<p>1.高度模拟公司结构</p>
<p>2.最好像迷宫般复杂</p>
<p>3.内部添加调试模式</p>
</blockquote>
<p>我先解释一下第一点,高度模拟一个公司的网络结构对于渗透测试来讲是非常关键的,我们就像在制作一个游戏,这个游戏应该很复杂,起码不是那种看一眼就知道怎么通关的那种解密游戏.在很多情况下内网漫游,对于一个入侵者来讲都是最难的,我们应该把我们的重心放到 apt 攻击上.</p>
<p>如果可以的话,在黑盒攻击中,我们就应该把自己看成入侵者,我们要思考如何不被发现,如何绕过防火墙,如何干扰日志管理系统,并且完成我们的战略目标,这时,一次入侵行为就不单单是一种入侵行为,他会被上升到战略高度,因此我们要高度模拟一个公司的网络结构;</p>
<p>然后是第二点,其实跟刚才说的一样,为了增加整体的难度,我们应该把这个结构设计的像迷宫一样复杂,往往在一个公司中,在一个系统建设了很久之后,的确会变得跟迷宫差不多;</p>
<p>然后是第三点,我们应该在内部添加一个调试模式,这个所谓的debug模式,是为了让我们测试各种各样的系统漏洞的,也就是说,我们应该有一个很方便的方法,去添加一个有漏洞的主机,测试这个漏洞的复现,POC或者是EXP;</p>
<p>为了好听,我们把这整个环境叫做Yume,她在日语里是梦的意思,因为梦和真实很接近,我们会用大约24 个小时的时间去搭建Yume,我们也会模拟整个公司的架构,包括他的部门,官方网站,甚至员工; </p>
<a id="more"></a> 
<hr>
<p>那好,现在就不多说了,开始设计公司信息吧;</p>
<h3 id="公司信息设计"><a href="#公司信息设计" class="headerlink" title="公司信息设计"></a>公司信息设计</h3><ul>
<li><p>公司名称,尤美传媒-中国</p>
<blockquote>
<p>这说明他是一个中外合资企业,</p>
</blockquote>
</li>
<li><p>员工数100人</p>
</li>
<li><p>所在地,不明(中国境内)</p>
</li>
<li><p>架构:混合云(这意味着一部分资产在云上,一部分在IDC中)</p>
</li>
<li><p>企业内部安全架构情况:</p>
<ul>
<li>外网连入,外层防火墙,核心交换机,汇聚交换机,物理机,物理机做的是虚拟化;<ul>
<li>因此我们需要的网络设备包括,防火墙,软交换机,虚拟机</li>
<li>公司IDC和公司员工网络不互通,因此,需要堡垒机进行运维管控</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>员工包含四类</p>
<blockquote>
<p>技术部门</p>
<p>营销事业部门</p>
<p>人力与薪酬绩效部门</p>
<p>管理团队(包括高层)</p>
</blockquote>
<p>在技术部门中,我们能获取到的信息包括</p>
<blockquote>
<p>1.程序源代码(开发总监提供,或在SVN中)~A</p>
<p>2.整体网络架构(网络管理员电脑中)~A</p>
<p>3.其他技术细节~S</p>
<p>事业部门中包括</p>
<p>1.商业机密~S</p>
<p>人力中包含</p>
<p>1.员工信息~A</p>
<p>2.领导信息~A</p>
<p>管理人员包含</p>
<p>1.商业机密~S</p>
</blockquote>
<blockquote>
<p>其中A类是指渗透中需要的可迭代信息(渗透中能用得上的信息),S类是目标信息(也就是有价值信息)</p>
<p>综上所述,我们需要虚拟出以下的服务器及主机</p>
<p>这里的虚拟主机指员工主机(若没有特殊提示,这将一直沿用到Yume的结束)</p>
<p>而服务器指对外提供服务的主机(如DNS,AD等)</p>
</blockquote>
<h3 id="主机列表"><a href="#主机列表" class="headerlink" title="主机列表"></a>主机列表</h3><ul>
<li><p>1.软防火墙-采用 pfSense</p>
</li>
<li><p>2.软WAF-Naxsi(虽然和真正的有区别..)</p>
</li>
<li><p>3.服务器(包括AD服务器,DNS服务器,NTP服务器,应用服务器,堡垒机服务,kibana日志服务,zabbix监控服务,数据库服务器,应用服务器)</p>
<ul>
<li>3.1为了使用不同的主机,我们将这些服务分割开来</li>
<li>3.2AD只能用windows的</li>
<li>3.3dns我们选择ubantu的</li>
<li>ntp使用centos的</li>
<li>堡垒机会在centos上安装jumperserver</li>
<li>kibana也会在centos上安装</li>
<li>zabbix如果能从ubuntu上安装的话就在ubuntu上安装</li>
<li>数据库在centos上安装,</li>
<li>应用根据需求在不同的服务器上安装</li>
</ul>
</li>
<li><p>4.个人主机,个人主机将会使用win10作为主要参考,win7作为副参考,winxp作为单台测试存在,也就是说,我们需要3台win10.两台win7和一台winxp</p>
<ul>
<li>4.1这其中分配是开发人员win10</li>
<li>4.2网络&amp;系统管理win10</li>
<li>4.3领导win10</li>
<li>4.4人力1win7</li>
<li>4.5人力2win7</li>
<li>4.6营销winxp</li>
</ul>
</li>
<li><p>5.关于应用,包括以下应用</p>
<ul>
<li><p>5.1.公司首页 - 使用wp实现</p>
</li>
<li><p>5.2.ITSM系统-使用iTOP实现</p>
</li>
<li><p>5.3.财务ERP - <a href="http://www.oschina.net/p/weberp" target="_blank" rel="noopener">Web ERP</a> 实现</p>
</li>
<li><p>5.4.人力管理系统+OA 然之协同<br>目前就想到这些,下面开始环境的搭建</p>
</li>
</ul>
</li>
</ul>

      </div>
        
          <section class="meta" id="footer-meta">
            <hr>
            <div class="new-meta-box">
              
                <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-04-20T23:43:00+09:00">
                  <a class="notlink">
                    <i class="fas fa-pencil-alt" aria-hidden="true"></i>
                    2019-04-20
                  </a>
                </div>
              
              
                
                <div class="new-meta-item meta-tags"><a class="tag" href="/tags/Yume/"><i class="fas fa-hashtag" aria-hidden="true"></i>&nbsp;Yume</a></div>
              
              
            </div>
          </section>
        

        
            <div class="prev-next">
                
                
                    <section class="next">
                        <span class="art-item-right" aria-hidden="true">
                            <h6>Next&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i></h6>
                            <h4>
                                <a href="/2019/04/19/secure-view/" rel="prev" title="secure_view">
                                    
                                        secure_view
                                    
                                </a>
                            </h4>
                            
                                
                                <h6 class="tags">
                                    <a class="tag" href="/tags/感悟/"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>感悟</a>
                                </h6>
                            
                        </span>
                    </section>
                
            </div>
        

    </section>

</article>

<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->


<br>

<!-- 显示推荐文章和评论 -->



  <article class="post white-box comments">
    <section class="article typo">
      <h4><i class="fas fa-comments fa-fw" aria-hidden="true"></i>&nbsp;Comments</h4>
      
      
      
        <section id="comments">
          <div id="valine_container" class="valine_thread">
            <i class="fas fa-spinner fa-spin fa-fw"></i>
          </div>
        </section>
      
    </section>
  </article>



<script>
    window.subData = {
        title: 'first_post',
        tools: true
    }
</script>


        </div>
        <aside class='l_side'>
            

        </aside>
        <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
    </div>
    <footer id="footer" class="clearfix">
  
  
  <br>
  <div><p>Blog content follows the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License</a></p>
</div>
  <div>Use <a href="https://xaoxuu.com/wiki/material-x/" target="_blank" class="codename">Material X</a> as theme, total visits <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span> times. 
  </div>
</footer>

    <script>setLoadingBarProgress(80);</script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>

  <script>
    var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
    var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
    var ALGOLIA_API_KEY = "";
    var ALGOLIA_APP_ID = "";
    var ALGOLIA_INDEX_NAME = "";
    var AZURE_SERVICE_NAME = "";
    var AZURE_INDEX_NAME = "";
    var AZURE_QUERY_KEY = "";
    var BAIDU_API_ID = "";
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/"||"/";
    if(!ROOT.endsWith('/'))ROOT += '/';
  </script>



  <script async src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      const $reveal = $('.reveal');
      if ($reveal.length === 0) return;
      const sr = ScrollReveal({ distance: 0 });
      sr.reveal('.reveal');
    });
  </script>


  <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
    
      <script src="https://cdn.jsdelivr.net/gh/xaoxuu/volantis@1/js/volantis.min.js"></script>
    
  
  <script>
  var GUEST_INFO = ['nick','mail','link'];
  var guest_info = 'nick,mail,link'.split(',').filter(function(item){
    return GUEST_INFO.indexOf(item) > -1
  });
  var notify = 'false' == true;
  var verify = 'false' == true;
  var valine = new Valine();
  valine.init({
    el: '#valine_container',
    notify: notify,
    verify: verify,
    guest_info: guest_info,
    
    appId: "d692YiKaIEAnGLP3K1Syn1RV-gzGzoHsz",
    appKey: "asYXhMm1VrCcMUAxXBp4AVhh",
    placeholder: "请在此处填写评论，中国六学委员会提醒您~戏说就是胡说，改编只能在这编",
    pageSize:'10',
    avatar:'mp',
    lang:'zh-cn',
    highlight:''
  })
  </script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>


  <script src="/js/app.js"></script>
<script src="/js/search.js"></script>
<script src="/js/clipboard-use.js"></script>







    <script>setLoadingBarProgress(100);</script>
</body>
</html>
