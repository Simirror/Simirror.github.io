{"meta":{"title":"Simirror的blog","subtitle":"再战昆仑","description":"应该是信息安全博客吧","author":"Simirror","url":"http://simirror.win","root":"/"},"pages":[],"posts":[{"title":"first_post","slug":"first-post","date":"2019-04-20T14:33:55.000Z","updated":"2019-04-20T14:43:00.407Z","comments":true,"path":"2019/04/20/first-post/","link":"","permalink":"http://simirror.win/2019/04/20/first-post/","excerpt":"专业渗透测试实验室搭建(1)-启航渗透测试最关键的就是练习,因为这是一个需要练习的职业,你要不停的练习,练习,练习才能有更深刻的体验和认知. 因此,实验环境的搭建就格外重要了,我们需要一个专业的渗透测试靶机集群,作为我们的练习目标 他应该满足我们的三个特征: 1.高度模拟公司结构 2.最好像迷宫般复杂 3.内部添加调试模式 我先解释一下第一点,高度模拟一个公司的网络结构对于渗透测试来讲是非常关键的,我们就像在制作一个游戏,这个游戏应该很复杂,起码不是那种看一眼就知道怎么通关的那种解密游戏.在很多情况下内网漫游,对于一个入侵者来讲都是最难的,我们应该把我们的重心放到 apt 攻击上. 如果可以的话,在黑盒攻击中,我们就应该把自己看成入侵者,我们要思考如何不被发现,如何绕过防火墙,如何干扰日志管理系统,并且完成我们的战略目标,这时,一次入侵行为就不单单是一种入侵行为,他会被上升到战略高度,因此我们要高度模拟一个公司的网络结构; 然后是第二点,其实跟刚才说的一样,为了增加整体的难度,我们应该把这个结构设计的像迷宫一样复杂,往往在一个公司中,在一个系统建设了很久之后,的确会变得跟迷宫差不多; 然后是第三点,我们应该在内部添加一个调试模式,这个所谓的debug模式,是为了让我们测试各种各样的系统漏洞的,也就是说,我们应该有一个很方便的方法,去添加一个有漏洞的主机,测试这个漏洞的复现,POC或者是EXP; 为了好听,我们把这整个环境叫做Yume,她在日语里是梦的意思,因为梦和真实很接近,我们会用大约24 个小时的时间去搭建Yume,我们也会模拟整个公司的架构,包括他的部门,官方网站,甚至员工;","text":"专业渗透测试实验室搭建(1)-启航渗透测试最关键的就是练习,因为这是一个需要练习的职业,你要不停的练习,练习,练习才能有更深刻的体验和认知. 因此,实验环境的搭建就格外重要了,我们需要一个专业的渗透测试靶机集群,作为我们的练习目标 他应该满足我们的三个特征: 1.高度模拟公司结构 2.最好像迷宫般复杂 3.内部添加调试模式 我先解释一下第一点,高度模拟一个公司的网络结构对于渗透测试来讲是非常关键的,我们就像在制作一个游戏,这个游戏应该很复杂,起码不是那种看一眼就知道怎么通关的那种解密游戏.在很多情况下内网漫游,对于一个入侵者来讲都是最难的,我们应该把我们的重心放到 apt 攻击上. 如果可以的话,在黑盒攻击中,我们就应该把自己看成入侵者,我们要思考如何不被发现,如何绕过防火墙,如何干扰日志管理系统,并且完成我们的战略目标,这时,一次入侵行为就不单单是一种入侵行为,他会被上升到战略高度,因此我们要高度模拟一个公司的网络结构; 然后是第二点,其实跟刚才说的一样,为了增加整体的难度,我们应该把这个结构设计的像迷宫一样复杂,往往在一个公司中,在一个系统建设了很久之后,的确会变得跟迷宫差不多; 然后是第三点,我们应该在内部添加一个调试模式,这个所谓的debug模式,是为了让我们测试各种各样的系统漏洞的,也就是说,我们应该有一个很方便的方法,去添加一个有漏洞的主机,测试这个漏洞的复现,POC或者是EXP; 为了好听,我们把这整个环境叫做Yume,她在日语里是梦的意思,因为梦和真实很接近,我们会用大约24 个小时的时间去搭建Yume,我们也会模拟整个公司的架构,包括他的部门,官方网站,甚至员工; 那好,现在就不多说了,开始设计公司信息吧; 公司信息设计 公司名称,尤美传媒-中国 这说明他是一个中外合资企业, 员工数100人 所在地,不明(中国境内) 架构:混合云(这意味着一部分资产在云上,一部分在IDC中) 企业内部安全架构情况: 外网连入,外层防火墙,核心交换机,汇聚交换机,物理机,物理机做的是虚拟化; 因此我们需要的网络设备包括,防火墙,软交换机,虚拟机 公司IDC和公司员工网络不互通,因此,需要堡垒机进行运维管控 员工包含四类 技术部门 营销事业部门 人力与薪酬绩效部门 管理团队(包括高层) 在技术部门中,我们能获取到的信息包括 1.程序源代码(开发总监提供,或在SVN中)~A 2.整体网络架构(网络管理员电脑中)~A 3.其他技术细节~S 事业部门中包括 1.商业机密~S 人力中包含 1.员工信息~A 2.领导信息~A 管理人员包含 1.商业机密~S 其中A类是指渗透中需要的可迭代信息(渗透中能用得上的信息),S类是目标信息(也就是有价值信息) 综上所述,我们需要虚拟出以下的服务器及主机 这里的虚拟主机指员工主机(若没有特殊提示,这将一直沿用到Yume的结束) 而服务器指对外提供服务的主机(如DNS,AD等) 主机列表 1.软防火墙-采用 pfSense 2.软WAF-Naxsi(虽然和真正的有区别..) 3.服务器(包括AD服务器,DNS服务器,NTP服务器,应用服务器,堡垒机服务,kibana日志服务,zabbix监控服务,数据库服务器,应用服务器) 3.1为了使用不同的主机,我们将这些服务分割开来 3.2AD只能用windows的 3.3dns我们选择ubantu的 ntp使用centos的 堡垒机会在centos上安装jumperserver kibana也会在centos上安装 zabbix如果能从ubuntu上安装的话就在ubuntu上安装 数据库在centos上安装, 应用根据需求在不同的服务器上安装 4.个人主机,个人主机将会使用win10作为主要参考,win7作为副参考,winxp作为单台测试存在,也就是说,我们需要3台win10.两台win7和一台winxp 4.1这其中分配是开发人员win10 4.2网络&amp;系统管理win10 4.3领导win10 4.4人力1win7 4.5人力2win7 4.6营销winxp 5.关于应用,包括以下应用 5.1.公司首页 - 使用wp实现 5.2.ITSM系统-使用iTOP实现 5.3.财务ERP - Web ERP 实现 5.4.人力管理系统+OA 然之协同目前就想到这些,下面开始环境的搭建","categories":[],"tags":[{"name":"Yume","slug":"Yume","permalink":"http://simirror.win/tags/Yume/"}]},{"title":"secure_view","slug":"secure-view","date":"2019-04-19T10:17:49.000Z","updated":"2019-04-19T10:46:02.831Z","comments":true,"path":"2019/04/19/secure-view/","link":"","permalink":"http://simirror.win/2019/04/19/secure-view/","excerpt":"","text":"关于信息安全的感悟最近对这一面有一点感悟,至于是什么样的感悟呢? 简单来讲就是几句话 各位, 我们所爱的事业和别的职业不一样 我们需要的格外的谨慎和冷静 你的能力是练出来的 成功是在不断的试错中试出来的 作为我们的一员 在实际入侵中没有任何防护措施 你的旁边可能是防火墙 是入侵检测系统,是WAF 你的前面可能是蜜罐,是病毒检测沙盒 可能是日志计入系统 就看谁能在成功的入侵的同时, 能够减少被发现的概率 留下最少的痕迹 你点下的每个按钮 运行的每个攻击荷载 都没有机会再来一次 你犯得的每一个错误 都会葬送你的未来或者剩下的日子 我们是一群赌徒 我们在拿我们的未来和现在赌 如果我们赌赢了 我们就能离伟大更进一步 离最完美的点更近一秒 记住 把你的全部 奉献给你所热爱的一切 这不是黑客的技术 是黑客的艺术 我们是艺术家","categories":[],"tags":[{"name":"感悟","slug":"感悟","permalink":"http://simirror.win/tags/感悟/"}]},{"title":"Hello World","slug":"hello-world","date":"2019-03-28T07:11:32.355Z","updated":"2019-03-28T07:11:32.355Z","comments":true,"path":"2019/03/28/hello-world/","link":"","permalink":"http://simirror.win/2019/03/28/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"重启","slug":"Restart","date":"2019-03-27T23:09:20.000Z","updated":"2019-03-28T09:27:43.390Z","comments":true,"path":"2019/03/28/Restart/","link":"","permalink":"http://simirror.win/2019/03/28/Restart/","excerpt":"","text":"#在不懈的努力下，我想我又要站起来了 对于这一切我只想说三个台词1.恕瑞玛，你们的皇帝回来了2.黑玫瑰将再次绽放3.我们走，我们走还有5天，加油","categories":[],"tags":[{"name":"再战昆仑","slug":"再战昆仑","permalink":"http://simirror.win/tags/再战昆仑/"}]}]}